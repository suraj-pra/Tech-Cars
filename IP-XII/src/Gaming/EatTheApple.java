/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package Gaming;

/**
 *
 * @author Suraj
 */
public class EatTheApple extends javax.swing.JFrame {

    /**
     * Creates new form EatTheApple
     */
    
    Score sc = new Score();
    int X = -20, Y = 0, c = 0, time = 0;
    String id, fname;
    char a = 'l';
    
    GamerID g;
    
    public EatTheApple() {
        initComponents();
    }
    
    public int getLocX(){
        int x = (int) (Math.random() * 699);
        x -= x%20;
        return x;
    }
    public int getLocY(){
        int y = 70 + (int) (Math.random() * 419);
        y -= y%20 + 10;
        return y;
    }
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        blk = new javax.swing.JLabel();
        f = new javax.swing.JLabel();
        o1 = new javax.swing.JLabel();
        o2 = new javax.swing.JLabel();
        o10 = new javax.swing.JLabel();
        o3 = new javax.swing.JLabel();
        o9 = new javax.swing.JLabel();
        o7 = new javax.swing.JLabel();
        o8 = new javax.swing.JLabel();
        o4 = new javax.swing.JLabel();
        o5 = new javax.swing.JLabel();
        o6 = new javax.swing.JLabel();
        s1 = new Gaming.LoadImage();
        s = new javax.swing.JLabel();
        bck = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setUndecorated(true);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
        });
        addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                formKeyPressed(evt);
            }
        });
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        blk.setBackground(new java.awt.Color(0, 0, 0));
        blk.setOpaque(true);
        getContentPane().add(blk, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 700, 50));

        f.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/Apple.png"))); // NOI18N
        f.setOpaque(true);
        getContentPane().add(f, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 150, 20, 20));

        o1.setBackground(new java.awt.Color(0, 153, 0));
        o1.setOpaque(true);
        getContentPane().add(o1, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 90, 20, 20));

        o2.setBackground(new java.awt.Color(0, 153, 0));
        o2.setOpaque(true);
        getContentPane().add(o2, new org.netbeans.lib.awtextra.AbsoluteConstraints(280, 110, 20, 20));

        o10.setBackground(new java.awt.Color(0, 153, 0));
        o10.setOpaque(true);
        getContentPane().add(o10, new org.netbeans.lib.awtextra.AbsoluteConstraints(580, 90, 20, 20));

        o3.setBackground(new java.awt.Color(0, 153, 0));
        o3.setOpaque(true);
        getContentPane().add(o3, new org.netbeans.lib.awtextra.AbsoluteConstraints(520, 190, 20, 20));

        o9.setBackground(new java.awt.Color(0, 153, 0));
        o9.setOpaque(true);
        getContentPane().add(o9, new org.netbeans.lib.awtextra.AbsoluteConstraints(300, 270, 20, 20));

        o7.setBackground(new java.awt.Color(0, 153, 0));
        o7.setOpaque(true);
        getContentPane().add(o7, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 210, 20, 20));

        o8.setBackground(new java.awt.Color(0, 153, 0));
        o8.setOpaque(true);
        getContentPane().add(o8, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 410, 20, 20));

        o4.setBackground(new java.awt.Color(0, 153, 0));
        o4.setOpaque(true);
        getContentPane().add(o4, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 290, 20, 20));

        o5.setBackground(new java.awt.Color(0, 153, 0));
        o5.setOpaque(true);
        getContentPane().add(o5, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 410, 20, 20));

        o6.setBackground(new java.awt.Color(0, 153, 0));
        o6.setOpaque(true);
        getContentPane().add(o6, new org.netbeans.lib.awtextra.AbsoluteConstraints(560, 330, 20, 20));

        s.setBackground(new java.awt.Color(255, 255, 255));
        s.setIcon(new javax.swing.ImageIcon(getClass().getResource("/img/Arrow.png"))); // NOI18N
        s.setOpaque(true);

        javax.swing.GroupLayout s1Layout = new javax.swing.GroupLayout(s1);
        s1.setLayout(s1Layout);
        s1Layout.setHorizontalGroup(
            s1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(s1Layout.createSequentialGroup()
                .addComponent(s)
                .addGap(0, 0, Short.MAX_VALUE))
        );
        s1Layout.setVerticalGroup(
            s1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, s1Layout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(s))
        );

        getContentPane().add(s1, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 250, 20, 20));

        bck.setBackground(new java.awt.Color(0, 102, 102));
        bck.setOpaque(true);
        getContentPane().add(bck, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 50, 700, 440));

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void formKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_formKeyPressed
        int e = evt.getKeyCode();
        switch(e){
            case 37:
                if(a != 'r'){
                    X = -20;
                    Y = 0;
                    a = 'l';
                    s1.angle = 180;
                }
                break;
            case 38:
                if(a != 'd'){
                    X = 0;
                    Y = -20;
                    a = 'u';
                    s1.angle = 270;
                }
                break;
            case 39:
                if(a != 'l'){
                    X = 20;
                    Y = 0;
                    a = 'r';
                    s1.angle = 0;
                }
                break;
            case 40:
                if(a != 'u'){
                    X = 0;
                    Y = 20;
                    a = 'd';
                    s1.angle = 90;
                }
                break;
        }
    }//GEN-LAST:event_formKeyPressed

    private void formWindowOpened(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowOpened
        sc.setVisible(true);
        
        try {
            s1.img = javax.imageio.ImageIO.read(new java.io.File("D:\\Path\\Arrow.png"));
        } catch (Exception e) {
            javax.swing.JOptionPane.showMessageDialog(null, e);
        }
        invalidate();
        
        javax.swing.JFrame x = this;
        x.setVisible(true);
        GameOver go = new GameOver();
        javax.swing.JLabel o[] = {o1, o2, o3, o4, o5, o6, o7, o8, o9, o10};
        
        java.util.Timer t = new java.util.Timer();
        t.schedule(new java.util.TimerTask() {
            @Override
            public void run() {
                boolean cd = false;
                for(int n = 0;n < 10;n++)
                    cd = cd || (s1.getX() == o[n].getX() && s1.getY() == o[n].getY());
                
                if (!cd && s1.getX() >= 0 && s1.getX() <= 680 && s1.getY() >= 50 && s1.getY() <= 470){
                    s1.setLocation(s1.getX() + X, s1.getY() + Y);
                    repaint();
                }
                else{
                    t.cancel();
                    sc.dispose();
                    time /= 8;
                    if(time > 0)
                        go.score = (c*20)/(time);
                    else if(time == 0 && c > 0)
                        go.score = 5;
                    else
                        go.score = 0;
                    go.name = "Eat The Apple";
                    go.gcode = "sapple";
                    go.time = time;
                    go.id = id;
                    go.fname = fname;
                    go.g = g;
                    go.setVisible(true);
                    x.dispose();
                }

                if((s1.getY() == f.getY()) && (s1.getX() == f.getX())){
                    int x = getLocX(), y = getLocY();
                    
                    for(int n = 0;n < 10;n++){
                        while(x == o[n].getX() && y == o[n].getY()){
                            x = getLocX();
                            y = getLocY();
                            n = 0;
                        }
                    }

                    c++;
                    sc.score.setText("Score: " + c);
                    f.setLocation(x, y);
                }
                time++;
            }
        }, 1000, 100);
    }//GEN-LAST:event_formWindowOpened

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(EatTheApple.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(EatTheApple.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(EatTheApple.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(EatTheApple.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new EatTheApple().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel bck;
    private javax.swing.JLabel blk;
    private javax.swing.JLabel f;
    private javax.swing.JLabel o1;
    private javax.swing.JLabel o10;
    private javax.swing.JLabel o2;
    private javax.swing.JLabel o3;
    private javax.swing.JLabel o4;
    private javax.swing.JLabel o5;
    private javax.swing.JLabel o6;
    private javax.swing.JLabel o7;
    private javax.swing.JLabel o8;
    private javax.swing.JLabel o9;
    private javax.swing.JLabel s;
    private Gaming.LoadImage s1;
    // End of variables declaration//GEN-END:variables
}
